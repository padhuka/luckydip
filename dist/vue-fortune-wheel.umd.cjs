(function(o,D){typeof exports=="object"&&typeof module<"u"?module.exports=D(require("vue")):typeof define=="function"&&define.amd?define(["vue"],D):(o=typeof globalThis<"u"?globalThis:o||self,o["vue-fortune-wheel"]=D(o.Vue))})(this,function(o){"use strict";function D(e,t){const r=[];for(;e!=="";){let a=e.substr(0,t);if(e.charAt(t)!==""&&e.charAt(t)!==" "){const i=a.lastIndexOf(" ");i!==-1&&(a=a.substr(0,i))}e=e.replace(a,"").trim(),r.push(a)}return r}const gt={radius:250,textRadius:190,textLength:6,textDirection:"horizontal",lineHeight:20,borderWidth:0,borderColor:"transparent",btnText:"GO",btnWidth:140,fontSize:34};function _t(e){const t=o.ref(),r=o.computed(()=>Object.assign(gt,e.canvas));function a(){const n=t.value;if(n.getContext){const{radius:s,textRadius:f,borderWidth:l,borderColor:u,fontSize:d}=r.value,v=Math.PI/(e.prizes.length/2),c=n.getContext("2d");c.clearRect(0,0,s*2,s*2),c.strokeStyle=u,c.lineWidth=l*2,c.font=`${d}px Arial`,e.prizes.forEach((y,p)=>{const _=p*v-Math.PI/2;c.fillStyle=y.bgColor,c.beginPath(),c.arc(s,s,s-l,_,_+v,!1),c.stroke(),c.arc(s,s,0,_+v,_,!0),c.fill(),c.save(),c.fillStyle=y.color,c.translate(s+Math.cos(_+v/2)*f,s+Math.sin(_+v/2)*f),i(c,_,v,y.name),c.restore()})}}function i(n,s,f,l){const{lineHeight:u,textLength:d,textDirection:v}=r.value,c=D(l,d);c!==null&&(v==="vertical"?n.rotate(s+f/2+Math.PI):n.rotate(s+f/2+Math.PI/2),c.forEach((y,p)=>{let _=-n.measureText(y).width/2,T=(p+1)*u;v==="vertical"&&(_=0,T=(p+1)*u-c.length*u/2),n.fillText(y,_,T)}))}return o.onMounted(()=>{e.type==="canvas"&&a()}),{wheelEl:t,canvasConfig:r,drawCanvas:a}}var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ve(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pt(){this.__data__=[],this.size=0}var yt=pt;function $t(e,t){return e===t||e!==e&&t!==t}var J=$t,bt=J;function mt(e,t){for(var r=e.length;r--;)if(bt(e[r][0],t))return r;return-1}var F=mt,Tt=F,At=Array.prototype,St=At.splice;function Ct(e){var t=this.__data__,r=Tt(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():St.call(t,r,1),--this.size,!0}var Ot=Ct,It=F;function Pt(e){var t=this.__data__,r=It(t,e);return r<0?void 0:t[r][1]}var wt=Pt,Et=F;function xt(e){return Et(this.__data__,e)>-1}var Mt=xt,Dt=F;function Rt(e,t){var r=this.__data__,a=Dt(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var jt=Rt,Lt=yt,Gt=Ot,zt=wt,Ft=Mt,Bt=jt;function I(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}I.prototype.clear=Lt,I.prototype.delete=Gt,I.prototype.get=zt,I.prototype.has=Ft,I.prototype.set=Bt;var B=I,Nt=B;function Ht(){this.__data__=new Nt,this.size=0}var Kt=Ht;function Ut(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var qt=Ut;function Wt(e){return this.__data__.get(e)}var kt=Wt;function Xt(e){return this.__data__.has(e)}var Yt=Xt,Zt=typeof z=="object"&&z&&z.Object===Object&&z,de=Zt,Jt=de,Qt=typeof self=="object"&&self&&self.Object===Object&&self,Vt=Jt||Qt||Function("return this")(),S=Vt,er=S,tr=er.Symbol,N=tr,he=N,ge=Object.prototype,rr=ge.hasOwnProperty,ar=ge.toString,R=he?he.toStringTag:void 0;function nr(e){var t=rr.call(e,R),r=e[R];try{e[R]=void 0;var a=!0}catch{}var i=ar.call(e);return a&&(t?e[R]=r:delete e[R]),i}var ir=nr,sr=Object.prototype,or=sr.toString;function fr(e){return or.call(e)}var cr=fr,_e=N,ur=ir,lr=cr,vr="[object Null]",dr="[object Undefined]",pe=_e?_e.toStringTag:void 0;function hr(e){return e==null?e===void 0?dr:vr:pe&&pe in Object(e)?ur(e):lr(e)}var j=hr;function gr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var L=gr,_r=j,pr=L,yr="[object AsyncFunction]",$r="[object Function]",br="[object GeneratorFunction]",mr="[object Proxy]";function Tr(e){if(!pr(e))return!1;var t=_r(e);return t==$r||t==br||t==yr||t==mr}var ye=Tr,Ar=S,Sr=Ar["__core-js_shared__"],Cr=Sr,Q=Cr,$e=function(){var e=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Or(e){return!!$e&&$e in e}var Ir=Or,Pr=Function.prototype,wr=Pr.toString;function Er(e){if(e!=null){try{return wr.call(e)}catch{}try{return e+""}catch{}}return""}var be=Er,xr=ye,Mr=Ir,Dr=L,Rr=be,jr=/[\\^$.*+?()[\]{}|]/g,Lr=/^\[object .+?Constructor\]$/,Gr=Function.prototype,zr=Object.prototype,Fr=Gr.toString,Br=zr.hasOwnProperty,Nr=RegExp("^"+Fr.call(Br).replace(jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Hr(e){if(!Dr(e)||Mr(e))return!1;var t=xr(e)?Nr:Lr;return t.test(Rr(e))}var Kr=Hr;function Ur(e,t){return e==null?void 0:e[t]}var qr=Ur,Wr=Kr,kr=qr;function Xr(e,t){var r=kr(e,t);return Wr(r)?r:void 0}var P=Xr,Yr=P,Zr=S,Jr=Yr(Zr,"Map"),V=Jr,Qr=P,Vr=Qr(Object,"create"),H=Vr,me=H;function ea(){this.__data__=me?me(null):{},this.size=0}var ta=ea;function ra(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var aa=ra,na=H,ia="__lodash_hash_undefined__",sa=Object.prototype,oa=sa.hasOwnProperty;function fa(e){var t=this.__data__;if(na){var r=t[e];return r===ia?void 0:r}return oa.call(t,e)?t[e]:void 0}var ca=fa,ua=H,la=Object.prototype,va=la.hasOwnProperty;function da(e){var t=this.__data__;return ua?t[e]!==void 0:va.call(t,e)}var ha=da,ga=H,_a="__lodash_hash_undefined__";function pa(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ga&&t===void 0?_a:t,this}var ya=pa,$a=ta,ba=aa,ma=ca,Ta=ha,Aa=ya;function w(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}w.prototype.clear=$a,w.prototype.delete=ba,w.prototype.get=ma,w.prototype.has=Ta,w.prototype.set=Aa;var Sa=w,Te=Sa,Ca=B,Oa=V;function Ia(){this.size=0,this.__data__={hash:new Te,map:new(Oa||Ca),string:new Te}}var Pa=Ia;function wa(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Ea=wa,xa=Ea;function Ma(e,t){var r=e.__data__;return xa(t)?r[typeof t=="string"?"string":"hash"]:r.map}var K=Ma,Da=K;function Ra(e){var t=Da(this,e).delete(e);return this.size-=t?1:0,t}var ja=Ra,La=K;function Ga(e){return La(this,e).get(e)}var za=Ga,Fa=K;function Ba(e){return Fa(this,e).has(e)}var Na=Ba,Ha=K;function Ka(e,t){var r=Ha(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var Ua=Ka,qa=Pa,Wa=ja,ka=za,Xa=Na,Ya=Ua;function E(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}E.prototype.clear=qa,E.prototype.delete=Wa,E.prototype.get=ka,E.prototype.has=Xa,E.prototype.set=Ya;var ee=E,Za=B,Ja=V,Qa=ee,Va=200;function en(e,t){var r=this.__data__;if(r instanceof Za){var a=r.__data__;if(!Ja||a.length<Va-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new Qa(a)}return r.set(e,t),this.size=r.size,this}var tn=en,rn=B,an=Kt,nn=qt,sn=kt,on=Yt,fn=tn;function x(e){var t=this.__data__=new rn(e);this.size=t.size}x.prototype.clear=an,x.prototype.delete=nn,x.prototype.get=sn,x.prototype.has=on,x.prototype.set=fn;var Ae=x,cn="__lodash_hash_undefined__";function un(e){return this.__data__.set(e,cn),this}var ln=un;function vn(e){return this.__data__.has(e)}var dn=vn,hn=ee,gn=ln,_n=dn;function U(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new hn;++t<r;)this.add(e[t])}U.prototype.add=U.prototype.push=gn,U.prototype.has=_n;var pn=U;function yn(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var $n=yn;function bn(e,t){return e.has(t)}var mn=bn,Tn=pn,An=$n,Sn=mn,Cn=1,On=2;function In(e,t,r,a,i,n){var s=r&Cn,f=e.length,l=t.length;if(f!=l&&!(s&&l>f))return!1;var u=n.get(e),d=n.get(t);if(u&&d)return u==t&&d==e;var v=-1,c=!0,y=r&On?new Tn:void 0;for(n.set(e,t),n.set(t,e);++v<f;){var p=e[v],_=t[v];if(a)var T=s?a(_,p,v,t,e,n):a(p,_,v,e,t,n);if(T!==void 0){if(T)continue;c=!1;break}if(y){if(!An(t,function(A,g){if(!Sn(y,g)&&(p===A||i(p,A,r,a,n)))return y.push(g)})){c=!1;break}}else if(!(p===_||i(p,_,r,a,n))){c=!1;break}}return n.delete(e),n.delete(t),c}var Se=In,Pn=S,wn=Pn.Uint8Array,En=wn;function xn(e){var t=-1,r=Array(e.size);return e.forEach(function(a,i){r[++t]=[i,a]}),r}var Mn=xn;function Dn(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var Rn=Dn,Ce=N,Oe=En,jn=J,Ln=Se,Gn=Mn,zn=Rn,Fn=1,Bn=2,Nn="[object Boolean]",Hn="[object Date]",Kn="[object Error]",Un="[object Map]",qn="[object Number]",Wn="[object RegExp]",kn="[object Set]",Xn="[object String]",Yn="[object Symbol]",Zn="[object ArrayBuffer]",Jn="[object DataView]",Ie=Ce?Ce.prototype:void 0,te=Ie?Ie.valueOf:void 0;function Qn(e,t,r,a,i,n,s){switch(r){case Jn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Zn:return!(e.byteLength!=t.byteLength||!n(new Oe(e),new Oe(t)));case Nn:case Hn:case qn:return jn(+e,+t);case Kn:return e.name==t.name&&e.message==t.message;case Wn:case Xn:return e==t+"";case Un:var f=Gn;case kn:var l=a&Fn;if(f||(f=zn),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;a|=Bn,s.set(e,t);var d=Ln(f(e),f(t),a,i,n,s);return s.delete(e),d;case Yn:if(te)return te.call(e)==te.call(t)}return!1}var Vn=Qn;function ei(e,t){for(var r=-1,a=t.length,i=e.length;++r<a;)e[i+r]=t[r];return e}var ti=ei,ri=Array.isArray,C=ri,ai=ti,ni=C;function ii(e,t,r){var a=t(e);return ni(e)?a:ai(a,r(e))}var si=ii;function oi(e,t){for(var r=-1,a=e==null?0:e.length,i=0,n=[];++r<a;){var s=e[r];t(s,r,e)&&(n[i++]=s)}return n}var fi=oi;function ci(){return[]}var ui=ci,li=fi,vi=ui,di=Object.prototype,hi=di.propertyIsEnumerable,Pe=Object.getOwnPropertySymbols,gi=Pe?function(e){return e==null?[]:(e=Object(e),li(Pe(e),function(t){return hi.call(e,t)}))}:vi,_i=gi;function pi(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var yi=pi;function $i(e){return e!=null&&typeof e=="object"}var G=$i,bi=j,mi=G,Ti="[object Arguments]";function Ai(e){return mi(e)&&bi(e)==Ti}var Si=Ai,we=Si,Ci=G,Ee=Object.prototype,Oi=Ee.hasOwnProperty,Ii=Ee.propertyIsEnumerable,Pi=we(function(){return arguments}())?we:function(e){return Ci(e)&&Oi.call(e,"callee")&&!Ii.call(e,"callee")},xe=Pi,q={exports:{}};function wi(){return!1}var Ei=wi;q.exports,function(e,t){var r=S,a=Ei,i=t&&!t.nodeType&&t,n=i&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===i,f=s?r.Buffer:void 0,l=f?f.isBuffer:void 0,u=l||a;e.exports=u}(q,q.exports);var Me=q.exports,xi=9007199254740991,Mi=/^(?:0|[1-9]\d*)$/;function Di(e,t){var r=typeof e;return t=t??xi,!!t&&(r=="number"||r!="symbol"&&Mi.test(e))&&e>-1&&e%1==0&&e<t}var re=Di,Ri=9007199254740991;function ji(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ri}var ae=ji,Li=j,Gi=ae,zi=G,Fi="[object Arguments]",Bi="[object Array]",Ni="[object Boolean]",Hi="[object Date]",Ki="[object Error]",Ui="[object Function]",qi="[object Map]",Wi="[object Number]",ki="[object Object]",Xi="[object RegExp]",Yi="[object Set]",Zi="[object String]",Ji="[object WeakMap]",Qi="[object ArrayBuffer]",Vi="[object DataView]",es="[object Float32Array]",ts="[object Float64Array]",rs="[object Int8Array]",as="[object Int16Array]",ns="[object Int32Array]",is="[object Uint8Array]",ss="[object Uint8ClampedArray]",os="[object Uint16Array]",fs="[object Uint32Array]",h={};h[es]=h[ts]=h[rs]=h[as]=h[ns]=h[is]=h[ss]=h[os]=h[fs]=!0,h[Fi]=h[Bi]=h[Qi]=h[Ni]=h[Vi]=h[Hi]=h[Ki]=h[Ui]=h[qi]=h[Wi]=h[ki]=h[Xi]=h[Yi]=h[Zi]=h[Ji]=!1;function cs(e){return zi(e)&&Gi(e.length)&&!!h[Li(e)]}var us=cs;function ls(e){return function(t){return e(t)}}var vs=ls,W={exports:{}};W.exports,function(e,t){var r=de,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,n=i&&i.exports===a,s=n&&r.process,f=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=f}(W,W.exports);var ds=W.exports,hs=us,gs=vs,De=ds,Re=De&&De.isTypedArray,_s=Re?gs(Re):hs,je=_s,ps=yi,ys=xe,$s=C,bs=Me,ms=re,Ts=je,As=Object.prototype,Ss=As.hasOwnProperty;function Cs(e,t){var r=$s(e),a=!r&&ys(e),i=!r&&!a&&bs(e),n=!r&&!a&&!i&&Ts(e),s=r||a||i||n,f=s?ps(e.length,String):[],l=f.length;for(var u in e)(t||Ss.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ms(u,l)))&&f.push(u);return f}var Os=Cs,Is=Object.prototype;function Ps(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Is;return e===r}var ws=Ps;function Es(e,t){return function(r){return e(t(r))}}var xs=Es,Ms=xs,Ds=Ms(Object.keys,Object),Rs=Ds,js=ws,Ls=Rs,Gs=Object.prototype,zs=Gs.hasOwnProperty;function Fs(e){if(!js(e))return Ls(e);var t=[];for(var r in Object(e))zs.call(e,r)&&r!="constructor"&&t.push(r);return t}var Bs=Fs,Ns=ye,Hs=ae;function Ks(e){return e!=null&&Hs(e.length)&&!Ns(e)}var Le=Ks,Us=Os,qs=Bs,Ws=Le;function ks(e){return Ws(e)?Us(e):qs(e)}var Ge=ks,Xs=si,Ys=_i,Zs=Ge;function Js(e){return Xs(e,Zs,Ys)}var Qs=Js,ze=Qs,Vs=1,eo=Object.prototype,to=eo.hasOwnProperty;function ro(e,t,r,a,i,n){var s=r&Vs,f=ze(e),l=f.length,u=ze(t),d=u.length;if(l!=d&&!s)return!1;for(var v=l;v--;){var c=f[v];if(!(s?c in t:to.call(t,c)))return!1}var y=n.get(e),p=n.get(t);if(y&&p)return y==t&&p==e;var _=!0;n.set(e,t),n.set(t,e);for(var T=s;++v<l;){c=f[v];var A=e[c],g=t[c];if(a)var $=s?a(g,A,c,t,e,n):a(A,g,c,e,t,n);if(!($===void 0?A===g||i(A,g,r,a,n):$)){_=!1;break}T||(T=c=="constructor")}if(_&&!T){var m=e.constructor,b=t.constructor;m!=b&&"constructor"in e&&"constructor"in t&&!(typeof m=="function"&&m instanceof m&&typeof b=="function"&&b instanceof b)&&(_=!1)}return n.delete(e),n.delete(t),_}var ao=ro,no=P,io=S,so=no(io,"DataView"),oo=so,fo=P,co=S,uo=fo(co,"Promise"),lo=uo,vo=P,ho=S,go=vo(ho,"Set"),_o=go,po=P,yo=S,$o=po(yo,"WeakMap"),bo=$o,ne=oo,ie=V,se=lo,oe=_o,fe=bo,Fe=j,M=be,Be="[object Map]",mo="[object Object]",Ne="[object Promise]",He="[object Set]",Ke="[object WeakMap]",Ue="[object DataView]",To=M(ne),Ao=M(ie),So=M(se),Co=M(oe),Oo=M(fe),O=Fe;(ne&&O(new ne(new ArrayBuffer(1)))!=Ue||ie&&O(new ie)!=Be||se&&O(se.resolve())!=Ne||oe&&O(new oe)!=He||fe&&O(new fe)!=Ke)&&(O=function(e){var t=Fe(e),r=t==mo?e.constructor:void 0,a=r?M(r):"";if(a)switch(a){case To:return Ue;case Ao:return Be;case So:return Ne;case Co:return He;case Oo:return Ke}return t});var Io=O,ce=Ae,Po=Se,wo=Vn,Eo=ao,qe=Io,We=C,ke=Me,xo=je,Mo=1,Xe="[object Arguments]",Ye="[object Array]",k="[object Object]",Do=Object.prototype,Ze=Do.hasOwnProperty;function Ro(e,t,r,a,i,n){var s=We(e),f=We(t),l=s?Ye:qe(e),u=f?Ye:qe(t);l=l==Xe?k:l,u=u==Xe?k:u;var d=l==k,v=u==k,c=l==u;if(c&&ke(e)){if(!ke(t))return!1;s=!0,d=!1}if(c&&!d)return n||(n=new ce),s||xo(e)?Po(e,t,r,a,i,n):wo(e,t,l,r,a,i,n);if(!(r&Mo)){var y=d&&Ze.call(e,"__wrapped__"),p=v&&Ze.call(t,"__wrapped__");if(y||p){var _=y?e.value():e,T=p?t.value():t;return n||(n=new ce),i(_,T,r,a,n)}}return c?(n||(n=new ce),Eo(e,t,r,a,i,n)):!1}var jo=Ro,Lo=jo,Je=G;function Qe(e,t,r,a,i){return e===t?!0:e==null||t==null||!Je(e)&&!Je(t)?e!==e&&t!==t:Lo(e,t,r,a,Qe,i)}var Ve=Qe,Go=Ae,zo=Ve,Fo=1,Bo=2;function No(e,t,r,a){var i=r.length,n=i,s=!a;if(e==null)return!n;for(e=Object(e);i--;){var f=r[i];if(s&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++i<n;){f=r[i];var l=f[0],u=e[l],d=f[1];if(s&&f[2]){if(u===void 0&&!(l in e))return!1}else{var v=new Go;if(a)var c=a(u,d,l,e,t,v);if(!(c===void 0?zo(d,u,Fo|Bo,a,v):c))return!1}}return!0}var Ho=No,Ko=L;function Uo(e){return e===e&&!Ko(e)}var et=Uo,qo=et,Wo=Ge;function ko(e){for(var t=Wo(e),r=t.length;r--;){var a=t[r],i=e[a];t[r]=[a,i,qo(i)]}return t}var Xo=ko;function Yo(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var tt=Yo,Zo=Ho,Jo=Xo,Qo=tt;function Vo(e){var t=Jo(e);return t.length==1&&t[0][2]?Qo(t[0][0],t[0][1]):function(r){return r===e||Zo(r,e,t)}}var ef=Vo,tf=j,rf=G,af="[object Symbol]";function nf(e){return typeof e=="symbol"||rf(e)&&tf(e)==af}var X=nf,sf=C,of=X,ff=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cf=/^\w*$/;function uf(e,t){if(sf(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||of(e)?!0:cf.test(e)||!ff.test(e)||t!=null&&e in Object(t)}var ue=uf,rt=ee,lf="Expected a function";function le(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(lf);var r=function(){var a=arguments,i=t?t.apply(this,a):a[0],n=r.cache;if(n.has(i))return n.get(i);var s=e.apply(this,a);return r.cache=n.set(i,s)||n,s};return r.cache=new(le.Cache||rt),r}le.Cache=rt;var vf=le,df=vf,hf=500;function gf(e){var t=df(e,function(a){return r.size===hf&&r.clear(),a}),r=t.cache;return t}var _f=gf,pf=_f,yf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$f=/\\(\\)?/g,bf=pf(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yf,function(r,a,i,n){t.push(i?n.replace($f,"$1"):a||r)}),t}),mf=bf;function Tf(e,t){for(var r=-1,a=e==null?0:e.length,i=Array(a);++r<a;)i[r]=t(e[r],r,e);return i}var Af=Tf,at=N,Sf=Af,Cf=C,Of=X,If=1/0,nt=at?at.prototype:void 0,it=nt?nt.toString:void 0;function st(e){if(typeof e=="string")return e;if(Cf(e))return Sf(e,st)+"";if(Of(e))return it?it.call(e):"";var t=e+"";return t=="0"&&1/e==-If?"-0":t}var Pf=st,wf=Pf;function Ef(e){return e==null?"":wf(e)}var xf=Ef,Mf=C,Df=ue,Rf=mf,jf=xf;function Lf(e,t){return Mf(e)?e:Df(e,t)?[e]:Rf(jf(e))}var ot=Lf,Gf=X,zf=1/0;function Ff(e){if(typeof e=="string"||Gf(e))return e;var t=e+"";return t=="0"&&1/e==-zf?"-0":t}var Y=Ff,Bf=ot,Nf=Y;function Hf(e,t){t=Bf(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[Nf(t[r++])];return r&&r==a?e:void 0}var ft=Hf,Kf=ft;function Uf(e,t,r){var a=e==null?void 0:Kf(e,t);return a===void 0?r:a}var qf=Uf;function Wf(e,t){return e!=null&&t in Object(e)}var kf=Wf,Xf=ot,Yf=xe,Zf=C,Jf=re,Qf=ae,Vf=Y;function ec(e,t,r){t=Xf(t,e);for(var a=-1,i=t.length,n=!1;++a<i;){var s=Vf(t[a]);if(!(n=e!=null&&r(e,s)))break;e=e[s]}return n||++a!=i?n:(i=e==null?0:e.length,!!i&&Qf(i)&&Jf(s,i)&&(Zf(e)||Yf(e)))}var tc=ec,rc=kf,ac=tc;function nc(e,t){return e!=null&&ac(e,t,rc)}var ic=nc,sc=Ve,oc=qf,fc=ic,cc=ue,uc=et,lc=tt,vc=Y,dc=1,hc=2;function gc(e,t){return cc(e)&&uc(t)?lc(vc(e),t):function(r){var a=oc(r,e);return a===void 0&&a===t?fc(r,e):sc(t,a,dc|hc)}}var _c=gc;function pc(e){return e}var yc=pc;function $c(e){return function(t){return t==null?void 0:t[e]}}var bc=$c,mc=ft;function Tc(e){return function(t){return mc(t,e)}}var Ac=Tc,Sc=bc,Cc=Ac,Oc=ue,Ic=Y;function Pc(e){return Oc(e)?Sc(Ic(e)):Cc(e)}var wc=Pc,Ec=ef,xc=_c,Mc=yc,Dc=C,Rc=wc;function jc(e){return typeof e=="function"?e:e==null?Mc:typeof e=="object"?Dc(e)?xc(e[0],e[1]):Ec(e):Rc(e)}var Lc=jc;function Gc(e,t){for(var r,a=-1,i=e.length;++a<i;){var n=t(e[a]);n!==void 0&&(r=r===void 0?n:r+n)}return r}var zc=Gc,Fc=Lc,Bc=zc;function Nc(e,t){return e&&e.length?Bc(e,Fc(t)):0}var Hc=Nc;const Kc=ve(Hc);var Uc=Math.floor,qc=Math.random;function Wc(e,t){return e+Uc(qc()*(t-e+1))}var kc=Wc,Xc=J,Yc=Le,Zc=re,Jc=L;function Qc(e,t,r){if(!Jc(r))return!1;var a=typeof t;return(a=="number"?Yc(r)&&Zc(t,r.length):a=="string"&&t in r)?Xc(r[t],e):!1}var Vc=Qc,eu=/\s/;function tu(e){for(var t=e.length;t--&&eu.test(e.charAt(t)););return t}var ru=tu,au=ru,nu=/^\s+/;function iu(e){return e&&e.slice(0,au(e)+1).replace(nu,"")}var su=iu,ou=su,ct=L,fu=X,ut=0/0,cu=/^[-+]0x[0-9a-f]+$/i,uu=/^0b[01]+$/i,lu=/^0o[0-7]+$/i,vu=parseInt;function du(e){if(typeof e=="number")return e;if(fu(e))return ut;if(ct(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ct(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ou(e);var r=uu.test(e);return r||lu.test(e)?vu(e.slice(2),r?2:8):cu.test(e)?ut:+e}var hu=du,gu=hu,lt=1/0,_u=17976931348623157e292;function pu(e){if(!e)return e===0?e:0;if(e=gu(e),e===lt||e===-lt){var t=e<0?-1:1;return t*_u}return e===e?e:0}var yu=pu,$u=kc,bu=Vc,vt=yu,mu=parseFloat,Tu=Math.min,Au=Math.random;function Su(e,t,r){if(r&&typeof r!="boolean"&&bu(e,t,r)&&(t=r=void 0),r===void 0&&(typeof t=="boolean"?(r=t,t=void 0):typeof e=="boolean"&&(r=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=vt(e),t===void 0?(t=e,e=0):t=vt(t)),e>t){var a=e;e=t,t=a}if(r||e%1||t%1){var i=Au();return Tu(e+i*(t-e+mu("1e-"+((i+"").length-1))),t)}return $u(e,t)}var Cu=Su;const Ou=ve(Cu);function Iu(e,t){const r=o.ref(!1),a=o.ref(0),i=o.ref(),n=o.computed(()=>e.useWeight?100:Kc(e.prizes,g=>g.probability||0)),s=o.computed(()=>{if(e.useWeight)return 0;const g=[...e.prizes].sort((b,Z)=>{const dt=String(b.probability).split(".")[1],ht=String(Z.probability).split(".")[1],Mu=dt?dt.length:0;return(ht?ht.length:0)-Mu}),$=String(g[0].probability).split(".")[1],m=$?$.length:0;return[1,10,100,1e3,1e4][m>4?4:m]}),f=o.computed(()=>{const g=[];return e.prizes.forEach($=>{const m=e.useWeight?$.weight||0:($.probability||0)*s.value,b=new Array(m).fill($.id);g.push(...b)}),g}),l=o.computed(()=>r.value?e.duration/1e3:0),u=o.computed(()=>({"-webkit-transform":`rotateZ(${a.value}deg)`,transform:`rotateZ(${a.value}deg)`,"-webkit-transition-duration":`${l.value}s`,"transition-duration":`${l.value}s`,"-webkit-transition-timing-function:":e.timingFun,"transition-timing-function":e.timingFun})),d=o.computed(()=>{let g=e.angleBase*360;return e.angleBase<0&&(g-=360),g}),v=o.computed(()=>!e.disabled&&!r.value&&n.value===100);o.watch(()=>e.prizeId,g=>{if(!r.value)return;let $=A(g);e.angleBase<0&&($-=360);const m=a.value;let b=e.angleBase*360+$;const Z=360*Math.floor((b-m)/360);e.angleBase>=0?b+=Math.abs(Z):b+=-360-Z,a.value=b}),c();function c(){if(n.value!==100)throw new Error("Prizes Is Error: Sum of probabilities is not 100!");return!0}function y(){if(v.value){if(e.verify){t("rotateStart",p);return}t("rotateStart"),p()}}function p(){r.value=!0;const g=e.prizeId||T();a.value=d.value+A(g)}function _(){r.value=!1,a.value%=360,t("rotateEnd",i.value)}function T(){const g=f.value.length;return f.value[Ou(0,g-1)]}function A(g){const $=360/e.prizes.length,m=e.prizes.findIndex(b=>b.id===g);return i.value=e.prizes[m],360-($*m+$/2)}return{rotateStyle:u,handleClick:y,onRotateEnd:_}}const Pu={class:"fw-container"},wu=["width","height"],Eu={class:"fw-btn"},xu=o.defineComponent({__name:"index",props:{type:{default:"canvas"},useWeight:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},verify:{type:Boolean,default:!1},canvas:{default:()=>({})},duration:{default:6e3},timingFun:{default:"cubic-bezier(0.36, 0.95, 0.64, 1)"},angleBase:{default:10},prizeId:{default:0},prizes:{default:()=>[]}},emits:["rotateStart","rotateEnd"],setup(e,{expose:t,emit:r}){const a=e,{wheelEl:i,canvasConfig:n}=_t(a),{handleClick:s,rotateStyle:f,onRotateEnd:l}=Iu(a,r);return t({startRotate:()=>{s()}}),(u,d)=>(o.openBlock(),o.createElementBlock("div",Pu,[o.createElementVNode("div",{class:"fw-wheel",style:o.normalizeStyle(o.unref(f)),onTransitionend:d[0]||(d[0]=(...v)=>o.unref(l)&&o.unref(l)(...v)),"on:webkitTransitionend":d[1]||(d[1]=(...v)=>o.unref(l)&&o.unref(l)(...v))},[e.type==="canvas"?(o.openBlock(),o.createElementBlock("canvas",{key:0,ref_key:"wheelEl",ref:i,width:o.unref(n).radius*2,height:o.unref(n).radius*2},null,8,wu)):o.renderSlot(u.$slots,"wheel",{key:1},void 0,!0)],36),o.createElementVNode("div",Eu,[e.type==="canvas"?(o.openBlock(),o.createElementBlock("div",{key:0,class:"fw-btn__btn",style:o.normalizeStyle({width:o.unref(n).btnWidth+"px",height:o.unref(n).btnWidth+"px"}),onClick:d[2]||(d[2]=(...v)=>o.unref(s)&&o.unref(s)(...v))},o.toDisplayString(o.unref(n).btnText),5)):(o.openBlock(),o.createElementBlock("div",{key:1,class:"fw-btn__image",onClick:d[3]||(d[3]=(...v)=>o.unref(s)&&o.unref(s)(...v))},[o.renderSlot(u.$slots,"button",{},void 0,!0)]))])]))}}),Du="";return((e,t)=>{const r=e.__vccOpts||e;for(const[a,i]of t)r[a]=i;return r})(xu,[["__scopeId","data-v-2516156a"]])});
